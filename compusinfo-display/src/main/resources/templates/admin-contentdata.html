<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<base href="http://localhost:8080/" />
	<meta charset="UTF-8"/>
	<link rel="shortcut icon" href="/static/images/favicon.png"/>
	<title>内容数据</title>
</head>
<body>

<!-- head YDC begin -->
<div th:include="/com/adminhead.html"></div>
<!-- head YDC end -->
<!-- content YDC begin -->
	<section>
		<div class="ydc-content-slide ydc-body">
			<div class="ydc-flex">
				<!-- left begin -->
				<div th:include="/com/admin-com.html"></div>
				<!-- left end -->
				<!-- right begin -->
				<div class="ydc-column ydc-column-8">
					<div class="ydc-entered-box">
						<div class="ydc-content-right">
							<div class="ydc-right-head">
								<div class="ydc-right-head-info" id="variousIndicators">
								</div>
							</div>
							<!-- gongGao begin -->
							<div class="ydc-loading-box">
								<div>
									<div class="ydc-chart-title clearfix">
										<div class="fl">
											<h2>整体统计</h2>
										</div>
									</div>
									<div id="main" style="height:400px; margin-top:20px;"></div>
									<div class="ydc-chart-title ydc-chart-title-top clearfix">
										<div class="fl">
											<h2>数据明细</h2>
										</div>
									</div>
									<div class="ydc-chart-table" id="managecharTable">
<!--										<table><thead><tr><th>发布日期</th><th>阅读</th><th>推荐</th><th>跟贴</th><th>分享</th></tr></thead>-->
<!--											<tbody><tr><td>2018-05-20</td><td>68909</td><td>68909</td><td>689</td><td>68909</td></tr></tbody>-->
<!--										</table>-->
									</div>
									<div class="ydc-pagination" >
										<ol id="pagePlugin"></ol>
									</div>
								</div>
							</div>
							<!-- gongGao End -->
						</div>
					</div>
				</div>
				<!-- right end -->
			</div>
		</div>
	</section>
<!-- content YDC end -->

<script type="text/javascript" src="../static/admin/js/jquery.min.js"></script>
<script src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>
<script type="text/javascript">
		$("#admin-data").addClass("active");
		window.onload=function(){
			let userId = window.sessionStorage.getItem("user_id");
			ManagecharTable(1,7);
			let data={
				userId: userId,
			};
			$.ajax({
				url:"/admin/variousIndicators",
				type:"get",
				data:data,
				dataType:"json",
				success:(data)=>{
					echartsDOM(data);
					console.log(data);
				},
				fail:(err)=>{
					console.log("页面响应失败");
				}
			})
		};

	    // 基于准备好的dom，初始化echarts图表
		function  echartsDOM(data){
			let variousIndicator = '';  //整个信息
			variousIndicator='<dl><a href="/admin/index"><dt>总阅读数</dt><dd>'+data.data.ReadNumIndicator+'</dd></a></dl>' +
					'<dl><a href="/admin/index"><dt>总点赞数</dt><dd>'+data.data.LikeNumSumIndicator+'</dd></a></dl>' +
					'<dl><a href="/admin/index"><dt>总评论数</dt><dd>'+data.data.CommentSumIndicator+'</dd></a></dl>';
			$("#variousIndicators").html(variousIndicator);
			var myChart = echarts.init(document.getElementById('main'));
			var option = {
				tooltip: {
					show: true
				},
				legend: {
					data:['总量']
				},
				xAxis : [
					{
						type : 'category',
						data : ["阅读","点赞","评论"]
					}
				],
				yAxis : [
					{
						type : 'value'
					}
				],
				series : [
					{
						"name":"总量",
						"type":"bar",
						"data":[data.data.ReadNumIndicator, data.data.LikeNumSumIndicator, data.data.CommentSumIndicator]
					}
				]
			};
			// 为echarts对象加载数据
			myChart.setOption(option);
		}
	</script>

</body>
</html>